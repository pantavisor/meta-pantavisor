This README file contains information on the contents of the meta-pantavisor layer.

meta-pantavisor is the center piece of the incubuation Yocto based container distro
for Embedded Linux Products.

Things are still in the making.

For now visit:

 * The github wiki: https://github.com/pantavisor/meta-pantavisor/wiki
 * The pantavisor Forum: https://community.pantavisor.io/

To find information and get support on how to use it.

## Pantavisor Features

The following features can be enabled via `Kconfig` (using `kas-container menu`) or by appending to `PANTAVISOR_FEATURES` in your configuration.

### runc
Adds `runc` (OCI container runtime) support to Pantavisor.
- **Kconfig**: `FEATURE_RUNC` (Default: `y`)
- **PANTAVISOR_FEATURES**: `runc`

### xconnect
Adds `pv-xconnect` (service mesh mediator) support to Pantavisor.
- **Kconfig**: `FEATURE_XCONNECT` (Default: `n`)
- **PANTAVISOR_FEATURES**: `xconnect`

## Development with `devtool` and `kas-container`

To develop on Pantavisor recipes using `devtool`, you can use the workspace layer support in `kas-container`.

1.  **Initialize workspace**: Use `devtool modify <recipe>` on your host to create a workspace in `build/workspace`.
2.  **Build with workspace**: Use `kas/with-workspace.yaml` in combination with your target machine config:
    ```bash
    ./kas-container build .github/configs/release/docker-x86_64-scarthgap.yaml:kas/with-workspace.yaml
    ```

`kas-container` has been enhanced to bind-mount the repository directory to its absolute host path inside the container. This ensures that absolute paths generated by `devtool` in `build/workspace/appends/*.bbappend` (e.g., `EXTERNALSRC`) are correctly resolved during the build.

**Note**: When using `devtool` workspace, it is recommended to use `--repo-rw` to allow BitBake to manage workspace state files:
```bash
./kas-container --repo-rw build <config>:kas/with-workspace.yaml
```

| Board | Build(Scarthgap) | Flash | Tested |
| :--- | :--- | :--- | :--- |
| **sunxi-orange-pi-3lts** | [![Schedule - sunxi-orange-pi-3lts-scarthgap](https://github.com/pantavisor/meta-pantavisor/actions/workflows/schedule-scarthgap-sunxi-orange-pi-3lts.yaml/badge.svg)](https://github.com/pantavisor/meta-pantavisor/actions/workflows/schedule-scarthgap-sunxi-orange-pi-3lts.yaml) | | |
| **sunxi-orange-pi-r1** | [![Schedule - sunxi-orange-pi-r1-scarthgap](https://github.com/pantavisor/meta-pantavisor/actions/workflows/schedule-scarthgap-sunxi-orange-pi-r1.yaml/badge.svg)](https://github.com/pantavisor/meta-pantavisor/actions/workflows/schedule-scarthgap-sunxi-orange-pi-r1.yaml) | | |
| **sunxi-bananapi-m2-berry** | [![Schedule - sunxi-bananapi-m2-berry-scarthgap](https://github.com/pantavisor/meta-pantavisor/actions/workflows/schedule-scarthgap-sunxi-bananapi-m2-berry.yaml/badge.svg)](https://github.com/pantavisor/meta-pantavisor/actions/workflows/schedule-scarthgap-sunxi-bananapi-m2-berry.yaml) | | |
| **imx8qxp-b0-mek** | [![Schedule - imx8qxp-b0-mek-scarthgap](https://github.com/pantavisor/meta-pantavisor/actions/workflows/schedule-scarthgap-imx8qxp-b0-mek.yaml/badge.svg)](https://github.com/pantavisor/meta-pantavisor/actions/workflows/schedule-scarthgap-imx8qxp-b0-mek.yaml) | | |
| **raspberrypi-armv8** | [![Schedule - raspberrypi-armv8-scarthgap](https://github.com/pantavisor/meta-pantavisor/actions/workflows/schedule-scarthgap-raspberrypi-armv8.yaml/badge.svg)](https://github.com/pantavisor/meta-pantavisor/actions/workflows/schedule-scarthgap-raspberrypi-armv8.yaml) | | |
| **colibri-imx6ull** | [![Schedule - colibri-imx6ull-scarthgap](https://github.com/pantavisor/meta-pantavisor/actions/workflows/schedule-scarthgap-colibri-imx6ull.yaml/badge.svg)](https://github.com/pantavisor/meta-pantavisor/actions/workflows/schedule-scarthgap-colibri-imx6ull.yaml) | | |
| **radxa-rock5a** | [![Schedule - radxa-rock5a-scarthgap](https://github.com/pantavisor/meta-pantavisor/actions/workflows/schedule-scarthgap-radxa-rock5a.yaml/badge.svg)](https://github.com/pantavisor/meta-pantavisor/actions/workflows/schedule-scarthgap-radxa-rock5a.yaml) | | |